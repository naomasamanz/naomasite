<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>なおまの研究所 - 2</title>
    <meta name="robots" content="index, follow">
    <meta name="description" content="これはもう１つの研究所だ。">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HN6YC5TWWS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HN6YC5TWWS');
</script>
    <style>
        body { background: #000; color: #0f0; font-family: 'Consolas', monospace; padding: 50px; text-align: center; }
        .warning { border: 2px solid #0f0; padding: 20px; display: inline-block; animation: blink 1s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } }
        a { color: #fff; text-decoration: none; border: 1px solid #fff; padding: 5px 10px; margin-top: 20px; display: inline-block; }
    </style>
</head>
<body>
    <h1>ここは第２研究所です。</h1>
    <div id="data-prison" style="font-family: 'Consolas', monospace; color: #0f0; background: #000; padding: 20px; border: 1px solid #0f0;">
    <h2>リアルタイムモニター</h2>
    <p>マウス座標: <span id="mouse-pos">X: 0, Y: 0</span></p>
    <p>スクロール量: <span id="scroll-val">0</span> px</p>
    <p>滞在秒数: <span id="timer-val">0</span> sec</p>
    <p>クリック回数: <span id="click-count">0</span></p>
         <p>最後に押されたキー: <span id="last-key" style="color: #ff0; font-weight: bold;">NONE</span></p>
<p>思考の蓄積（ログ）: <br>
    <span id="key-history" style="font-size: 0.8em; color: #888; word-wrap: break-word;">...waiting for input</span>
</p>
</div>

<script>
  let clicks = 0;
  let seconds = 0;

// タイマー起動
setInterval(() => {
    seconds++;
    document.getElementById('timer-val').innerText = seconds;
}, 1000);

// マウス追跡
window.addEventListener('mousemove', (e) => {
    document.getElementById('mouse-pos').innerText = `X: ${e.clientX}, Y: ${e.clientY}`;
});

// スクロール監視
window.addEventListener('scroll', () => {
    document.getElementById('scroll-val').innerText = window.scrollY;
});

// 執念のクリックカウント
window.addEventListener('click', () => {
    clicks++;
    document.getElementById('click-count').innerText = clicks;
});
　　// --- 記憶の復元（ページ読み込み時） ---
let savedLog = localStorage.getItem('naoma_log') || "";
const historyDisplay = document.getElementById('key-history');
historyDisplay.innerText = savedLog || "Waiting for your thoughts...";

window.addEventListener('keydown', (e) => {
    // 1. 入力の検知
    const keyName = (e.key === " ") ? "Space" : e.key;
    
    // 2. 記憶の更新（最新1000文字に限定）
    savedLog += keyName + " ";
    if (savedLog.length > 1000) {
        savedLog = savedLog.slice(-1000); // 古い記憶を消去
    }
    
    // 3. 記憶の定着（localStorageへ）
    try {
        localStorage.setItem('naoma_log', savedLog);
    } catch (err) {
        console.error("記憶容量が限界です、城主！", err);
    }

    // 4. 視覚への投影
    historyDisplay.innerText = savedLog;
    document.getElementById('last-key').innerText = keyName;
});
    </script>
    
</body>
 </html>
